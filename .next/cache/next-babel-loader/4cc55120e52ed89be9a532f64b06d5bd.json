{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/ab/Documents/laravel-nextjs-starter-main/client/pages/user/password/reset/[token].tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from \"next/router\";\nimport { Card } from \"@/components/Card/Card\";\nimport { PrimaryButton } from \"@/components/Button/Button\";\nimport { TextInput } from \"@/components/Form/FormElement\";\nimport { H1 } from \"@/components/Typography/Headers\";\nimport React, { useState } from \"react\";\nimport { UserValidator } from \"@/services/UserValidator\";\nimport { connect } from \"react-redux\";\nimport { resetPassword } from \"@/store/auth/authActions\";\nimport { Alert } from \"@/components/Alert/Alert\";\n\nfunction ResetPassword(props) {\n  _s();\n\n  var router = useRouter();\n  var token = router.query.token;\n\n  var _useState = useState({\n    email: \"\",\n    emailError: \"\",\n    password: \"\",\n    passwordError: \"\",\n    password_confirmed: \"\",\n    password_confirmedError: \"\",\n    error: \"\"\n  }),\n      formData = _useState[0],\n      setFormData = _useState[1];\n  /**\n   * Handle input change.\n   *\n   * @param {object} e\n   *   The event object.\n   */\n\n\n  var handleInputChange = function handleInputChange(e) {\n    var _objectSpread2;\n\n    setFormData(_objectSpread(_objectSpread({}, formData), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, e.currentTarget.name, e.currentTarget.value), _defineProperty(_objectSpread2, \"emailError\", \"\"), _defineProperty(_objectSpread2, \"passwordError\", \"\"), _objectSpread2)));\n  };\n  /**\n   * Validate the form data and send it to the api by dispatching a redux action.\n   */\n\n\n  var submit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var validator, isEmailValid, arePasswordsValid, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              validator = new UserValidator(); // Check if email is valid.\n\n              isEmailValid = validator.validateEmail(formData.email);\n\n              if (isEmailValid) {\n                _context.next = 5;\n                break;\n              }\n\n              setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n                emailError: \"Please enter a valid email address.\"\n              }));\n              return _context.abrupt(\"return\");\n\n            case 5:\n              // Check if passwords are valid and equal.\n              arePasswordsValid = validator.validatePassword(formData.password, formData.password_confirmed, 8);\n\n              if (arePasswordsValid) {\n                _context.next = 9;\n                break;\n              }\n\n              setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n                emailError: \"Please enter a valid password and make sure you confirm it correctly.\"\n              }));\n              return _context.abrupt(\"return\");\n\n            case 9:\n              _context.next = 11;\n              return props.resetPassword(formData.email, formData.password, token);\n\n            case 11:\n              res = _context.sent;\n\n              // Redirect to home route on successful password reset.\n              if (res.success) {\n                router.push(process.env.NEXT_PUBLIC_USER_HOME_ROUTE);\n              } // Display danger notification if something went wrong.\n\n\n              if (res.error) {\n                setFormData(_objectSpread(_objectSpread({}, formData), {}, {\n                  error: res.error\n                }));\n              }\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function submit() {\n      return _ref.apply(this, arguments);\n    };\n  }(); // Return statement.\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-screen h-screen relative\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute w-full md:w-3/5 lg:w-1/3 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\",\n      children: /*#__PURE__*/_jsxDEV(Card, {\n        additionalInnerClasses: \"justify-center items-center\",\n        additionalWrapperClasses: \"bg-gray-100\",\n        children: /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [formData.error && /*#__PURE__*/_jsxDEV(Alert, {\n            type: \"danger\",\n            children: formData.error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(H1, {\n            withMargin: true,\n            center: true,\n            children: \"Reset your password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"You now have the possibility to reset your password. Firstly, please confirm your email address and then create a new password.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n            type: \"text\",\n            value: formData.email,\n            placeholder: \"Your email address...\",\n            onChange: function onChange(e) {\n              handleInputChange(e);\n            },\n            name: \"email\",\n            errorMsg: formData.emailError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n            type: \"password\",\n            value: formData.password,\n            placeholder: \"Your new password...\",\n            onChange: function onChange(e) {\n              handleInputChange(e);\n            },\n            name: \"password\",\n            errorMsg: formData.passwordError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n            type: \"password\",\n            value: formData.password_confirmed,\n            placeholder: \"Confirm your new password\",\n            onChange: function onChange(e) {\n              handleInputChange(e);\n            },\n            name: \"password_confirmed\",\n            errorMsg: formData.password_confirmedError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(PrimaryButton, {\n            onClick: function onClick() {\n              submit();\n            },\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ResetPassword, \"YC6I8ZsLtl7mt03QE1IAE6NKito=\", false, function () {\n  return [useRouter];\n});\n\n_c = ResetPassword;\nexport default connect(null, {\n  resetPassword: resetPassword\n})(ResetPassword);\n\nvar _c;\n\n$RefreshReg$(_c, \"ResetPassword\");","map":{"version":3,"sources":["/home/ab/Documents/laravel-nextjs-starter-main/client/pages/user/password/reset/[token].tsx"],"names":["useRouter","Card","PrimaryButton","TextInput","H1","React","useState","UserValidator","connect","resetPassword","Alert","ResetPassword","props","router","token","query","email","emailError","password","passwordError","password_confirmed","password_confirmedError","error","formData","setFormData","handleInputChange","e","currentTarget","name","value","submit","validator","isEmailValid","validateEmail","arePasswordsValid","validatePassword","res","success","push","process","env","NEXT_PUBLIC_USER_HOME_ROUTE"],"mappings":"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","sourcesContent":["import {useRouter} from \"next/router\";\nimport {Card} from \"@/components/Card/Card\";\nimport {PrimaryButton} from \"@/components/Button/Button\";\nimport {TextInput} from \"@/components/Form/FormElement\";\nimport {H1} from \"@/components/Typography/Headers\";\nimport React, {useState} from \"react\";\nimport {UserValidator} from \"@/services/UserValidator\";\nimport {connect} from \"react-redux\";\nimport {resetPassword} from \"@/store/auth/authActions\";\nimport {Alert} from \"@/components/Alert/Alert\";\n\nfunction ResetPassword(props: any) {\n    const router = useRouter();\n    const {token} = router.query;\n\n    const [formData, setFormData] = useState<{\n        email: string;\n        emailError: string;\n        password: string;\n        passwordError: string;\n        password_confirmed: string;\n        password_confirmedError: string;\n        error: string;\n    }>({\n        email: \"\",\n        emailError: \"\",\n        password: \"\",\n        passwordError: \"\",\n        password_confirmed: \"\",\n        password_confirmedError: \"\",\n        error: \"\",\n    });\n\n    /**\n     * Handle input change.\n     *\n     * @param {object} e\n     *   The event object.\n     */\n    const handleInputChange = (e: React.FormEvent<HTMLInputElement>): void => {\n        setFormData({\n            ...formData,\n            [e.currentTarget.name]: e.currentTarget.value,\n            emailError: \"\",\n            passwordError: \"\",\n        });\n    };\n\n    /**\n     * Validate the form data and send it to the api by dispatching a redux action.\n     */\n    const submit = async (): Promise<void> => {\n        const validator: UserValidator = new UserValidator();\n\n        // Check if email is valid.\n        const isEmailValid: boolean = validator.validateEmail(formData.email);\n\n        if (!isEmailValid) {\n            setFormData({\n                ...formData,\n                emailError: \"Please enter a valid email address.\",\n            });\n            return;\n        }\n\n        // Check if passwords are valid and equal.\n        const arePasswordsValid: boolean = validator.validatePassword(\n            formData.password,\n            formData.password_confirmed,\n            8\n        );\n\n        if (!arePasswordsValid) {\n            setFormData({\n                ...formData,\n                emailError:\n                    \"Please enter a valid password and make sure you confirm it correctly.\",\n            });\n            return;\n        }\n\n        // Make API request via redux.\n        const res: any = await props.resetPassword(\n            formData.email,\n            formData.password,\n            token\n        );\n\n        // Redirect to home route on successful password reset.\n        if (res.success) {\n            router.push(process.env.NEXT_PUBLIC_USER_HOME_ROUTE);\n        }\n\n        // Display danger notification if something went wrong.\n        if (res.error) {\n            setFormData({\n                ...formData,\n                error: res.error,\n            });\n        }\n    };\n\n    // Return statement.\n    return (\n        <div className=\"w-screen h-screen relative\">\n            <div\n                className=\"absolute w-full md:w-3/5 lg:w-1/3 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\">\n                <Card\n                    additionalInnerClasses=\"justify-center items-center\"\n                    additionalWrapperClasses=\"bg-gray-100\"\n                >\n                    <>\n                        {/* Display error Message if applicable */}\n                        {formData.error && (\n                            <Alert type=\"danger\">{formData.error}</Alert>\n                        )}\n\n                        {/* Primary Header */}\n                        <H1 withMargin={true} center={true}>\n                            Reset your password\n                        </H1>\n                        <p>\n                            You now have the possibility to reset your password.\n                            Firstly, please confirm your email address and then\n                            create a new password.\n                        </p>\n\n                        {/* Email */}\n                        <TextInput\n                            type=\"text\"\n                            value={formData.email}\n                            placeholder=\"Your email address...\"\n                            onChange={(e) => {\n                                handleInputChange(e);\n                            }}\n                            name=\"email\"\n                            errorMsg={formData.emailError}\n                        />\n\n                        {/* Password */}\n                        <TextInput\n                            type=\"password\"\n                            value={formData.password}\n                            placeholder=\"Your new password...\"\n                            onChange={(e) => {\n                                handleInputChange(e);\n                            }}\n                            name=\"password\"\n                            errorMsg={formData.passwordError}\n                        />\n\n                        {/* Password confirmed */}\n                        <TextInput\n                            type=\"password\"\n                            value={formData.password_confirmed}\n                            placeholder=\"Confirm your new password\"\n                            onChange={(e) => {\n                                handleInputChange(e);\n                            }}\n                            name=\"password_confirmed\"\n                            errorMsg={formData.password_confirmedError}\n                        />\n\n                        {/* Submit Button */}\n                        <PrimaryButton\n                            onClick={() => {\n                                submit();\n                            }}\n                        >\n                            Submit\n                        </PrimaryButton>\n                    </>\n                </Card>\n            </div>\n        </div>\n    );\n}\n\nexport default connect(null, {resetPassword})(ResetPassword);\n"]},"metadata":{},"sourceType":"module"}